# ansible
---
## Спеки
- Используется две воркер виртульные машины, одна для web другая для db
- OC ubuntu 24.04  
---
## Реализации  
- Использовал роли для логического разграничения задач, а также templates для конфиг env файлов
- Основной плебук запускает роли на разных хостах, на web (django+nginx) и db (postgres)
- Приложение предворительно было создано на локальной машине, а после была произведена интеграция с базой данных (приложение берет данные для отображения)
- Уменьшение размеров образов реализовал с помощью базового образа alpine, multistage сборки, очистки кэша приложения
---
## Логирование
- Имеется debug вывод в лог файл ansible.log в ту же рабочую директорию
- Имеется callback_plugin elastic для логирования задач, команда для просмотра ниже (установил эластик локально отдельно для проверки логов):
```bash
curl -X GET "localhost:9200/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "query": { "match_all": {} }
}
'
```
## Обработка ошибок
- реализована обработка ошибок по занятости диска, установка пакетов на разные ос воркер нод, обработка ошибок установки пакетов
